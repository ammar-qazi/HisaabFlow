[bank_info]
name = Meezan
display_name = Meezan
file_patterns = *accountfullstatement*, *statement*
detection_content_signatures = Transaction Date, Description, Debit, Credit, Available Balance, Opening Balance
expected_headers = Transaction Date , Description , Debit , Credit , Available Balance , 
currency_primary = PKR
cashew_account = Meezan

[csv_config]
encoding = ascii
delimiter = ,
header_row = 1
has_header = true
skip_rows = 0

[column_mapping]
debit = Debit 
credit = Credit 
title = Description 
date = Transaction Date 

[data_cleaning]
amount_format_decimal_separator = .
amount_format_thousand_separator = ,
amount_format_negative_style = minus
amount_format_currency_position = prefix
auto_detect_format = False
currency_handling = standard
skip_rows_containing = Opening Balance,Closing Balance

# Transfer detection patterns with flexible name matching
[outgoing_patterns]
outgoing_transfer = Money Transferred to {name}

[incoming_patterns]
Raast_P2P_Fund_Transfer = Raast P2P Fund transfer from {name}
Remittance_from = Remittance from {name}
peer_to_peer_in = Money Received from {name}


# Bank-specific description cleaning rules matching real data patterns
[description_cleaning]
# Remove sensitive information patterns
remove_xxx = ^(.*?)-XXX.*$|\1
remove_raxxxx = ^(.*?)\s+RAXXX.*$|\1
# Clean money transfer descriptions - extract recipient name
clean_money_transfer = ^Money Transferred to ([^-]+)-XXXX\d+ STAN\(\d+\)\s*$|Transfer to \1
# Clean POS purchase descriptions - extract merchant name
clean_pos_purchase = ^(.+?)\s+POS Purchase\s*-\s*STAN\s*\(\d+\)\s*$|\1 (POS)
# Clean online purchase descriptions
clean_online_purchase = ^(.+?)\s+Online Purchase\s*-\s*STAN\s*\(\d+\)\s*$|\1 (Online)
# Clean charges and taxes
clean_charges_taxes = ^Charges Taxes Plus FED\s*-\s*STAN\(\d+\)\s*$|Bank Charges & Taxes
# Remove STAN transaction IDs from any remaining descriptions
clean_stan_ids = ^(.*?)\s*-?\s*STAN\s*\(\d+\)\s*$|\1
